{% extends '@WebProfiler/Profiler/layout.html.twig' %}

{% block toolbar %}
    {% set text %}
        <div class="sf-toolbar-info-piece">
            <b>Has session</b>
            <span>{% if collector.sessionmetadata|length %}yes{% else %}no{% endif %}</span>
        </div>
    {% endset %}
    {% include '@WebProfiler/Profiler/toolbar_item.html.twig' with { 'link': profiler_url } %}
{% endblock %}

{% block menu %}
    <span class="label">
        {# TODO: Change icon #}
        <span class="icon">{{ include('@WebProfiler/Icon/request.svg') }}</span>
        <strong>Session</strong>
    </span>
{% endblock %}

{% block panel %}

    <div class="tab {{ collector.sessionmetadata is empty ? 'disabled' }}">
        <h3 class="tab-title">Session</h3>

        <div class="tab-content">
            <h3>Session Metadata</h3>

            {% if collector.sessionmetadata is empty %}
                <div class="empty">
                    <p>No session metadata</p>
                </div>
            {% else %}
                {{ include('@WebProfiler/Profiler/table.html.twig', { data: collector.sessionmetadata }, with_context = false) }}
            {% endif %}

            <h3>Session Attributes</h3>

            {% if collector.sessionattributes is empty %}
                <div class="empty">
                    <p>No session attributes</p>
                </div>
            {% else %}
                {{ include('@WebProfiler/Profiler/table.html.twig', { data: collector.sessionattributes, labels: ['Attribute', 'Value'] }, with_context = false) }}
            {% endif %}
        </div>
    </div>

    <div class="tab {{ collector.flashes is empty ? 'disabled' }}">
        <h3 class="tab-title">Flashes</h3>

        <div class="tab-content">
            <h3>Flashes</h3>

            {% if collector.flashes is empty %}
                <div class="empty">
                    <p>No flash messages were created.</p>
                </div>
            {% else %}
                {{ include('@WebProfiler/Profiler/table.html.twig', { data: collector.flashes }, with_context = false) }}
            {% endif %}
        </div>
    </div>
{% endblock %}
